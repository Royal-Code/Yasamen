<div @attributes="AdditionalAttributes" class="@Classes">
    @if (Title is not null || Closeable)
    {
        <header>
            @if (Title is not null)
            {
                <h5>@Title</h5>
            }
            @if (Handler != null && Closeable)
            {
                <button type="button" class="btn-close" aria-label="Close" @onclick="CloseHandler"></button>
            }
        </header>
    }
    @ChildContent
</div>

@code {

    private string Classes => "ya-aside-box"
        .AddClass(Size.ToWidthCssClass())
        .AddClass(AdditionalClasses);

    [CascadingParameter]
    public OffCanvasHandler? Handler { get; set; }

    [Parameter]
    public string? Title { get; set; }

    [Parameter]
    public bool Closeable { get; set; }

    [Parameter]
    public SpacingSize Size { get; set; }

    [Parameter]
    public RenderFragment ChildContent { get; set; } = null!;

    [Parameter]
    public string? AdditionalClasses { get; set; }

    [Parameter(CaptureUnmatchedValues = true)]
    public Dictionary<string, object>? AdditionalAttributes { get; set; }

    public async Task CloseHandler()
    {
        if (Handler is not null)
            await Handler.Hide();
    }
}